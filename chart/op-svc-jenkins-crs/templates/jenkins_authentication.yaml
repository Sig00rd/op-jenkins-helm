{{- if .Values.jenkinsAuthenticationEnabled }}
  {{- $apiVersion := .Values.apiVersion }}
  {{- range $jenkinsAuthentication := .Values.jenkinsAuthentication}}
---
apiVersion: {{ .Values.apiVersion }}
kind: JenkinsAuthentication
metadata:
  name: {{ .Values.jenkinsAuthentication.name }}
  {{- with .Values.jenkinsAuthentication.labels }}
  labels: {{ toYaml . | nindent 4 }}
  {{- end }}
  {{- with .Values.jenkinsAuthentication.annotations }}
  annotations: {{ toYaml . | nindent 4 }}
  {{- end }}
spec:
  type: {{ .Values.jenkinsAuthentication.type }}
  {{- if eq .Values.jenkinsAuthentication.type "githubOAuth" }}
  githubOAuth:
    clientID: {{ .Values.jenkinsAuthentication.githubOAuth.clientID }}
    {{- with .Values.jenkinsAuthentication.githubOAuth.clientSecretRef }}
    clientSecretRef: {{- toYaml . | nindent 6 }}
    {{- end }}
    webUri: {{ .Values.jenkinsAuthentication.githubOAuth.webUri }}
    apiUri: {{ .Values.jenkinsAuthentication.githubOAuth.apiUri }}
    {{- with .Values.jenkinsAuthentication.githubOAuth.scopes }}
    scopes: {{- toYaml . | nindent 6 }}
    {{- end }}
  {{- else if eq .Values.jenkinsAuthentication.type "googleOAuth" }}
  googleOAuth:
    clientID: {{ .Values.jenkinsAuthentication.googleOAuth.clientID }}
    {{- with .Values.jenkinsAuthentication.googleOAuth.clientSecretRef }}
    clientSecretRef: {{- toYaml . | nindent 6 }}
    {{- end }}
    domain: {{ .Values.jenkinsAuthentication.googleOAuth.domain }}
  {{- end }}
  {{- end }}
  {{- end }}
